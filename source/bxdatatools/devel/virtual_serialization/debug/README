
STEP 1:
-------

First version of the QPBA :

22 serialization::archive 7 6 0 5 A::c1 1 0
0 0 0 11 2 5 A::c2 1 0
1 2 22 0
2 33 3 5 B::c3 1 0
3 44 3
4 55 2
5 2 66


array of 6 objects:

----------------------------------------------------------------------
classID classRef className trkLvl classVersion objID value
----------------------------------------------------------------------
0	-	 "A::c1"   1	  0	       0     i=11
2	-	 "A::c2"   1	  0	       1     name="22"
-	0*	 -	   -	  -	       2     i=33
3	-	 "B::c3"   1	  0	       3     c=44
-	3*	 -	   -	  -  	       4     c=55
-	2*	 -	   -	  -	       5     name="66"
----------------------------------------------------------------------


od -t u1 Bprg2.data

0000000 113 112  98  97   1   7   1   1   6   0   0   0   0   1   5  65
        _q_ _p_ _b_ _a_   __7__   __1__   ______6______  _0_  __5__ _A_
           magic          ver    qpbaver      count     clsid 
           
0000020  58  58  99  49   1  84   0   0   0   0   1  11   1   2   1   5
        _:_ _:_ _c_ _1_   __T__  _0_ _0_ _F_ _0_  __11__   __2__   __5__
                          trklvl clsver trklvl      i      clsid   
                                     objid  clsver 
0000040  65  58  58  99  50   1  84   0   1   1   1   2  50  50   0   0
        _A_ _:_ _:_ _c_ _2_   __T__  _0_  __1__   __2__ _2_ _2_   **0**
                             trklvl clsver          name         clsref
                                          objid
0000060   1   2   1  33   1   3   1   5  66  58  58  99  51   1  84   0
          __2__   _33_    __3__   __5__ _B_ _:_ _:_ _c_ _3_   __T__  _0_
         clsid     i      clsid                              trklvl clsver 

0000100   1   3   1  44   3   0   1   4   1  55   2   0   1   5   1   2
          __3__  __44__   **3**   __4__  __55__   **2**   __5__   __2__
         clsid     c     clsref  objid    c      clsref  objid     name...  
                    
0000120  54  54
        _6_ _6_

0000122


STEP 2:
-------

After introducing for tracking_info, class_id_type, library_version_type, item_version_type, version_type, collection_size_type, object_id_type ...


$ od -t u1 Bprg2.data.ref | cut -d' ' -f2- | head -5
113 112  98  97   1   7   1   1   1   6   0   1   5  65  58  58
 99  49   1  84   0   0   0   0   1  11   1   2   1   5  65  58
 58  99  50   1  84   0   1   1   1   2  50  50   0   1   2   1
 33   1   3   1   5  66  58  58  99  51   1  84   0   1   3   1
 44   1   3   1   4   1  55   1   2   1   5   1   2  54  54


$ cat Bprg1.xml.ref 
<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<!DOCTYPE boost_serialization>
<boost_serialization signature="serialization::archive" version="7">
<objects>
	<count>6</count>
	<item class_id="0" class_name="A::c1" tracking_level="1" version="0" object_id="_0">
		<A__base class_id="1" tracking_level="0" version="0"></A__base>
		<i>11</i>
	</item>
	<item class_id="2" class_name="A::c2" tracking_level="1" version="0" object_id="_1">
		<A__base></A__base>
		<name>22</name>
	</item>
	<item class_id_reference="0" object_id="_2">
		<A__base></A__base>
		<i>33</i>
	</item>
	<item class_id="3" class_name="B::c3" tracking_level="1" version="0" object_id="_3">
		<A__base></A__base>
		<c>44</c>
	</item>
	<item class_id_reference="3" object_id="_4">
		<A__base></A__base>
		<c>55</c>
	</item>
	<item class_id_reference="2" object_id="_5">
		<A__base></A__base>
		<name>66</name>
	</item>
</objects>
</boost_serialization>

>>>
113 112  98  97   1   7   1   1   1   6   0   1   5  65  58  58
'q' 'p' 'b' 'a'   __7__   __1__   __6__  _0_  __5__ 'A' ':' ':'
 4 magic bytes    version version count clsid length    string

 99  49   1  84   0   0   0   0   1  11   1   2   1   5  65  58
'c' '1'   true   _0_ _0_ _0_ _0_  i=11    __2__   __5__ 'A' ':'
          bool                                    length 

 58  99  50   1  84   0   1   1   1   2  50  50   0   1   2   1
':' 'c' '2'   true    0   __1__   __2__ '2' '2'   0   __2__  __
string        bool                name="22"       

 33   1   3   1   5  66  58  58  99  51   1  84   0   1   3   1
33__  __3__   __5__ 'B' ':' ':' 'c' '3'   true    0   __3__  __


 44   1   3   1   4   1  55   1   2   1   5   1   2  54  54
44__  __3__   __4__   _55__   __2__   __5__   __2__ '6' '6'

<<<