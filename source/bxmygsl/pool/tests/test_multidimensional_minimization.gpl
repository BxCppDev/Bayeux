# -*- mode: gnuplot; -*- 
# mygsl - test_multidimensional_minimization.gpl

#! rm -f test_multimin.his test_multimin.sol test_multimin.pars
#! time ${MYGSL_ROOT}/Linux-i686/bin/test_multidimensional_minimization -t --debug --50000

unset logscale x
unset logscale y

set title "mygsl - test_multidimensional_minimization"

set grid

set logscale y
set xrange [*:*] 
set yrange [*:*]
set ylabel "f"

set xlabel "a"
plot \
     'test_multimin_f_init_a.data'  title "Initial 'a'"  w p pt 7 ps 0.15 lt 1, \
     '' notitle w l lt 1 , \
     'test_multimin_f_sol_a.data'   title "Final 'a'"  w p pt 7 ps 0.15 lt 2, \
     '' notitle w l lt 2
pause -1 "Hit return..."

set xlabel "b"
plot \
      'test_multimin_f_init_b.data' title "Initial 'b'"  w p pt 7 ps 0.15 lt 1, \
     '' notitle w l lt 1 , \
     'test_multimin_f_sol_b.data'   title "Final 'b'"  w p pt 7 ps 0.15 lt 2, \
     '' notitle w l lt 2
pause -1 "Hit return..."

set xlabel "r"
plot \
      'test_multimin_f_init_r.data' title "Initial 'r'"  w p pt 7 ps 0.15 lt 1, \
     '' notitle w l lt 1 , \
     'test_multimin_f_sol_r.data'   title "Final 'r'"  w p pt 7 ps 0.15 lt 2, \
     '' notitle w l lt 2
pause -1 "Hit return..."

set xlabel "p1"
plot \
      'test_multimin_f_init_p1.data' title "Initial 'p1'" w p pt 7 ps 0.15 lt 1, \
     '' notitle w l lt 1 , \
     'test_multimin_f_sol_p1.data'   title "Final 'p1'"  w p pt 7 ps 0.15 lt 2, \
     '' notitle w l lt 2
pause -1 "Hit return..."

set xlabel "p3"
plot \
      'test_multimin_f_init_p3.data' title "Initial 'p3'" w p pt 7 ps 0.15 lt 1, \
     '' notitle w l lt 1 , \
     'test_multimin_f_sol_p3.data'   title "Final 'p3'"  w p pt 7 ps 0.15 lt 2, \
     '' notitle w l lt 2
pause -1 "Hit return..."

set xlabel "p4"
plot \
      'test_multimin_f_init_p4.data' title "Initial 'p4'" w p pt 7 ps 0.15 lt 1, \
     '' notitle w l lt 1 , \
     'test_multimin_f_sol_p4.data'   title "Final 'p4'"  w p pt 7 ps 0.15 lt 2, \
     '' notitle w l lt 2
pause -1 "Hit return..."

unset logscale x
unset logscale y

#set xrange [0:1024] 
set xrange [100:500] 
set yrange [0:] 
set xlabel "Channel"
set ylabel "Counts"
plot \
     'test_multimin.his' using (0.5*(column(1)+column(2))):3 title "Data" with points pt 6 ps 0.5 lt 1, \
     'test_multimin.ini' using 1:2 title "Initial parameters" with lines lt 3, \
     'test_multimin.sol' using 1:2 title "Fit" with lines lt 2
pause -1 "Hit return..."

###     'test_multimin.his' using (0.5*(column(1)+column(2))):3:(sqrt($3)) title "" with yerrorlines lt 1, \
#  

# end of test_multidimensional_minimization.gpl
