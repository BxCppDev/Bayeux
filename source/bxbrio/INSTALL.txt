
brio installation instructions:
------------------------------------

1 - Third-party software setup :
--------------------------------


brio depends on the following libraries and/or programs :
 - ROOT >= 5.26 (should be setup through the Cadfael aggregator)
 - datatools >=5.0.0 (should be setup through the Bayeux aggregator)


2- Plain CMake installation :
-----------------------------

Change to the brio source base directory :
{{{
bash$ cd <brio_source_base_dir>
}}}

Create a '__build' directory :
{{{
bash$ mkdir __build
bash$ cd __build
}}}

Configure the installation to the '<brio_install_base_dir>' directory.
Note: you must choose a directory where you have write access
and typically 30 MB available.

{{{
bash$ cmake \
   -DCMAKE_INSTALL_PREFIX:PATH=<brio_install_base_dir> \
   -DCMAKE_BUILD_TYPE:STRING=Release \
   -Ddatatools_DIR=<path_to_datatools_cmake_config_dir> \
   -DCMAKE_MODULE_PATH=<path_to_find_root_file_dir> \
   -DBRIO_WITH_DOC=1 \
   -DBRIO_WITH_TEST=1 \
   ..
}}}

This prints :
{{{
-- The C compiler identification is GNU
-- The CXX compiler identification is GNU

...

-- Configuring done
-- Generating done
-- Build files have been written to: <brio_source_base_dir>/__build
}}}

Build :
{{{
bash$ make
}}}

Generate the documentation :
{{{
bash$ make doc
}}}

Perform tests :
{{{
bash$ make test
}}}

Installation (here in the '${HOME}/software' directory) :
{{{
bash$ make install
}}}

Remove the temporary build directory :
{{{
bash$ cd __build
bash$ rm -fr __build
}}}


3 - Installation using the 'pkgtool' wrapper script :
-----------------------------------------------------

Change to the brio base directory :
{{{
bash$ cd <brio_source_base_dir>
}}}

Getting help :
{{{
bash$ ./pkgtools.d/pkgtool --help
}}}

Run the following configure/build/install sequence :
{{{
bash$ ./pkgtools.d/pkgtool check
bash$ ./pkgtools.d/pkgtool configure --install-prefix <brio_install_base_dir>
bash$ ./pkgtools.d/pkgtool build --number-of-tasks auto
bash$ ./pkgtools.d/pkgtool doc
bash$ ./pkgtools.d/pkgtool test
bash$ ./pkgtools.d/pkgtool install
}}}

De-installation :
{{{
bash$ ./pkgtools.d/pkgtool uninstall
}}}

Full reset of the package :
{{{
bash$ ./pkgtools.d/pkgtool reset
}}}


4 - Setup :
-----------

The following instructions applies to the bash shell.

Load the definition of the brio setup function :
{{{
bash$ source <brio_install_base_dir>/etc/brio_setup.sh
NOTICE: do_datatools_setup: Please setup 'brio' with 'do_brio_setup'.
}}}

Invoke the setup function :
{{{
bash$ do_brio_setup
NOTICE: do_brio_setup: Setup brio...
NOTICE: do_brio_setup: Setup brio done.
}}}

Use brio :
{{{
bash$ which brio-config
<brio_install_base_dir>/bin/brio-config
bash$ brio-config --version
4.0.0
bash$ brio-config --cflags
...
bash$ brio-config --ldflags
...
}}}

--
Fran√ßois Mauger <mauger@lpccaen.in2p3.fr>
Updated: 2013-04-22





